import{r as i,m as z,o as P,c as m,u as s,d as D,a as O,b as F,l as W,_ as G,e as K,f,w as n,g as o,h as Q,i as Y,n as J,j as L,k as I,p as v,t as X,B as M,N as V,S as Z,M as ee,q as ne,s as R,v as oe,x as j,y as te,z as ae,A as N,C as U,D as se,E as le,F as S,G as re,H as ue}from"./utils-BTNhGHVz.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ce,c as _e,a as ie,b as pe}from"./vue-router-BItpTLTU.js";import{u as de,U as me,n as $}from"./notify-BfxPpzob.js";import{P as fe}from"./Password-2rgNutzh.js";const ve=["src"],ge={__name:"App",setup(E){const r=i({icon:z("client-icon","/public/app.png"),name:z("client-name","Приложение")}),a=i(!1),u=i(null),p=()=>{a.value=!a.value,localStorage.setItem("theme-is-dark",a.value?"true":"false"),g()},g=()=>{a.value?u.value=F:u.value=W};return P(()=>{a.value=localStorage.getItem("theme-is-dark")==="true",g()}),(t,l)=>{const c=I,h=V,d=M,e=L,y=K("router-view"),w=ne,b=Y,k=Q,x=G;return f(),m(x,{theme:u.value,locale:s(O),"date-locale":s(D)},{default:n(()=>[o(k,null,{default:n(()=>[o(b,{position:"absolute",class:J(["main-layout",a.value?"dark":"light"])},{default:n(()=>[o(e,null,{default:n(()=>[o(c,{justify:"space-between",align:"center"},{default:n(()=>[o(c,{align:"center"},{default:n(()=>[v("img",{src:r.value.icon,width:"30px",height:"30px",alt:""},null,8,ve),v("h2",null,X(r.value.name),1)]),_:1}),o(c,{align:"center"},{default:n(()=>[a.value?(f(),m(d,{key:0,tertiary:"",circle:"",onClick:p},{icon:n(()=>[o(h,{size:"22",component:s(Z)},null,8,["component"])]),_:1})):(f(),m(d,{key:1,tertiary:"",circle:"",onClick:p},{icon:n(()=>[o(h,{size:"22",component:s(ee)},null,8,["component"])]),_:1}))]),_:1})]),_:1})]),_:1}),o(w,{style:{padding:"24px"}},{default:n(()=>[o(c,{align:"center",justify:"center",style:{height:"100%"}},{default:n(()=>[o(y)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["theme","locale","date-locale"])}}},he=T(ge,[["__scopeId","data-v-4df1ca1a"]]),ye={__name:"Authorize",setup(E){const r=de(R("VITE_API_HOST","/")),a=z("auth-query",R("VITE_AUTH_QUERY")),u=ce(),p=oe(),g=i(null),t=i({login:"",password:"",remember:!1}),l=i({login:null,password:null}),c=()=>t.value.login.length<5||t.value.password.length<5;async function h(){l.value.login=null,l.value.password=null;const d={login:t.value.login,password:t.value.password,remember:t.value.remember};r.post(`oauth/authorize?${a}`,d).then(e=>{window.location.replace(e.data.url)}).catch(e=>{if(e.code==="ERR_NETWORK"){p.error($("Сервер не доступен"));return}e.response.data&&e.response.data.error&&p.error($(e.response.data.error)),e.response.status===422&&(l.value=e.response.data.validate)})}return(d,e)=>{const y=V,w=se,b=ae,k=le,x=te,C=M,q=I,H=j;return f(),m(H,{title:"Авторизация",bordered:"",segmented:{content:!0,footer:"soft"}},{footer:n(()=>[o(q,{justify:"space-between"},{default:n(()=>[o(C,{text:"",onClick:e[3]||(e[3]=_=>s(u).push(`/v1/oauth/forgot-password?${s(a)}`))},{default:n(()=>e[4]||(e[4]=[S("Забыли свой пароль?")])),_:1}),o(C,{onClick:h,disabled:c(),size:"large",type:"primary",style:{width:"150px"}},{default:n(()=>e[5]||(e[5]=[S(" Войти ")])),_:1},8,["disabled"])]),_:1})]),default:n(()=>[o(x,{ref:g.value,"label-width":80,model:t.value},{default:n(()=>[o(b,{label:"Логин",path:"login",required:"",feedback:s(U)(l.value.login,"login","логин"),"validation-status":s(N)(l.value.login)},{default:n(()=>[o(w,{size:"large",value:t.value.login,"onUpdate:value":e[0]||(e[0]=_=>t.value.login=_),type:"text",placeholder:"Логин"},{prefix:n(()=>[o(y,{component:s(me)},null,8,["component"])]),_:1},8,["value"])]),_:1},8,["feedback","validation-status"]),o(b,{label:"Пароль",path:"password",required:"",feedback:s(U)(l.value.password,"password","пароль"),"validation-status":s(N)(l.value.password)},{default:n(()=>[o(w,{size:"large",value:t.value.password,"onUpdate:value":e[1]||(e[1]=_=>t.value.password=_),type:"password","show-password-on":"mousedown",placeholder:"Пароль"},{prefix:n(()=>[o(y,{component:s(fe)},null,8,["component"])]),_:1},8,["value"])]),_:1},8,["feedback","validation-status"]),v("div",null,[o(k,{size:"large",label:"Не выходить",checked:t.value.remember,"onUpdate:checked":e[2]||(e[2]=_=>t.value.remember=_)},null,8,["checked"])])]),_:1},8,["model"])]),_:1})}}},B=T(ye,[["__scopeId","data-v-b678acca"]]),we={};function be(E,r){const a=I,u=j;return f(),m(u,{bordered:"",segmented:{content:!0,footer:"soft"}},{default:n(()=>[o(a,{vertical:"",align:"center",justify:"center",style:{height:"100%"}},{default:n(()=>r[0]||(r[0]=[v("div",{class:"err_code"},"404",-1),v("div",{class:"err_message"},"Страница не найдена",-1)])),_:1})]),_:1})}const ke=T(we,[["render",be],["__scopeId","data-v-a0375c1e"]]),xe=_e({history:R("PROD")?ie():pe(),routes:[{path:"/",component:B},{path:"/oauth/authorize",name:"authorize",component:B},{path:"/:pathMatch(.*)*",component:ke}]}),A=re(he);A.use(ue);A.use(xe);A.mount("#app");
